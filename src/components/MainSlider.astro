---
// MainSlider.astro (Version française améliorée)
// Tableau des slides avec contenu optimisé pour MACOBATE
 const slides = [
  {
    index: "1",
    title:
      "L’ingénierie de demain, <br /> dès aujourd’hui ",
    description:
      "MACOBATE est une entreprise marocaine d’ingénierie industrielle, spécialisée dans <br />les pro-jets complexes : charpente métallique, équipements hydromécaniques, <br /> appareils à pression, stations de traitement d’eau et projets EPC.",
    buttonText: "Découvrez notre savoir-faire",
    buttonLink: "#projects",
    image: "images/main-slider/image-1.jpg",
    alignment: "left",
  },
  {
    index: "2",
    title:
      "Solutions complètes <br /> en structures métalliques <br /> et équipements industriels",
    description:
     "Forte de plus de 40 ans d’expérience,MACOBATE allie savoir-faire de terrain et<br /> rigueur tech-nique certifiée.",
    buttonText: "Nos secteurs d'activité",
    buttonLink: "#activite",
    image: "images/main-slider/image-2.jpg",
    alignment: "right",
  },
  {
    index: "3",
    title:
      "MACOBATE, leader des <br />équipements hydromécaniques<br />pour les infrastructures<br />hydroélectriques",
    description:
      "Conception, fabrication et installation d'équipements pour barrages et stations de traitement des eaux",
    buttonText: "Rejoignez l'équipe MACOBATE",
    buttonLink: "#Rejoignez-l'équipe",
    image: "images/main-slider/image-3.jpg",
    alignment: "left",
  },
];

// Vérification de sécurité que slides est bien défini
 const safeSlides = slides || [];

---

<!--Slider Principal-->
<section class="main-slider">
  <div
    class="rev_slider_wrapper fullwidthbanner-container"
    id="rev_slider_one_wrapper"
    data-source="gallery"
  >
    <div
      class="rev_slider fullwidthabanner"
      id="rev_slider_one"
      data-version="5.4.1"
    >
      <ul>
        {
          safeSlides.map((slide, i) => (
            <li
              key={i}
              data-description="Description du Slide"
              data-easein="default"
              data-easeout="default"
              data-fsmasterspeed="1500"
              data-fsslotamount="7"
              data-fstransition="fade"
              data-hideafterloop="0"
              data-hideslideonmobile="off"
              data-index={slide.index}
              data-masterspeed="default"
              data-param1=""
              data-param10=""
              data-param2=""
              data-param3=""
              data-param4=""
              data-param5=""
              data-param6=""
              data-param7=""
              data-param8=""
              data-param9=""
              data-rotate="0"
              data-saveperformance="off"
              data-slotamount="default"
              data-thumb={slide.image}
              data-title="Titre du Slide"
              data-transition="parallaxvertical"
            >
              <img
                alt=""
                class="rev-slidebg"
                data-bgfit="cover"
                data-bgparallax="10"
                data-bgposition="center center"
                data-bgrepeat="no-repeat"
                data-no-retina=""
                src={slide.image}
              />

              <div
                class="tp-caption"
                data-x={slide.alignment}
                data-y="middle"
                data-voffset="['-80','-90','-70','-80']"
                data-frames='[{"from":"y:[100%];z:0;rX:0;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;","mask":"x:0;y:0;","speed":1500,"to":"o:1;","delay":1000,"ease":"Power3.easeInOut"},{"delay":"wait","speed":1000,"to":"auto:auto;","mask":"x:0;y:0;","ease":"Power3.easeInOut"}]'
                style="z-index: 7;"
              >
                <h2 set:html={slide.title} />
              </div>

              <div
                class="tp-caption"
                data-x={slide.alignment}
                data-y="middle"
                data-voffset="['80','60','60','40']"
                data-frames='[{"from":"y:[100%];","speed":1500,"to":"o:1;","delay":1000,"ease":"Power3.easeInOut"},{"delay":"wait","speed":1000,"to":"auto:auto;","ease":"Power3.easeInOut"}]'
                style="z-index: 7;"
              >
                <div class="text" set:html={slide.description} />
              </div>

              <div
                class="tp-caption"
                data-x={slide.alignment}
                data-y="middle"
                data-voffset="['150','130','130','130']"
                data-frames='[{"from":"y:[100%];","speed":1500,"to":"o:1;","delay":1000,"ease":"Power3.easeInOut"},{"delay":"wait","speed":1000,"to":"auto:auto;","ease":"Power3.easeInOut"}]'
                style="z-index: 7;"
              >
                <a href={slide.buttonLink} class="slide-button  know_more">
                  <span class="icon flaticon-right-arrow-1" />{" "}
                  {slide.buttonText}
                </a>
              </div>
            </li>
          ))
        }
      </ul>
    </div>
  </div>
</section>
<!--Fin Slider Principal-->
<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const buttons = document.querySelectorAll('.slide-button');

    buttons.forEach((btn) => {
      btn.addEventListener('click', (e) => {
        const targetSelector = btn.getAttribute('href');

        if (targetSelector.startsWith('#')) {
          const target = document.querySelector(targetSelector);
          if (target) {
            e.preventDefault();
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'center' 
            });
          }
        }
      });
    });
  });
</script>

