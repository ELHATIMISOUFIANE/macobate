---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import Header from "../../../components/Header.astro";
import Footer from "../../../components/Footer.astro";
import CallToActionSection from "../../../components/CallToActionSection.astro";

// Base de données complète des articles de blog
const blogArticles = [
  {
    id: "news-1",
    title:
      "MACOBATE remporte le contrat de la nouvelle station de traitement d'eau à Rabat",
    author: "Équipe MACOBATE",
    date: "15 Novembre 2024",
    category: "Projets",
    tags: ["Traitement d'eau", "Contrats", "Innovation"],
    excerpt:
      "MACOBATE a été sélectionné pour concevoir et installer une station de traitement d'eau de dernière génération dans la région de Rabat. Ce projet d'envergure témoigne de notre expertise reconnue...",
    image: "/images/resource/news-1.jpg",
    readTime: "5 min",
    featured: true,
  },
  {
    id: "news-2",
    title:
      "Innovation en charpente métallique : MACOBATE lance sa nouvelle gamme de structures préfabriquées",
    author: "Service Commercial",
    date: "08 Novembre 2024",
    category: "Innovation",
    tags: ["Charpente métallique", "Innovation", "Préfabrication"],
    excerpt:
      "MACOBATE franchit une nouvelle étape dans l'innovation avec le lancement de sa gamme révolutionnaire de structures métalliques préfabriquées qui révolutionne la construction industrielle...",
    image: "/images/resource/news-2.jpg",
    readTime: "4 min",
    featured: true,
  },
  {
    id: "news-3",
    title: "MACOBATE remporte le prix de l'excellence industrielle 2024",
    author: "Relations Presse",
    date: "28 Octobre 2024",
    category: "Prix et Reconnaissances",
    tags: ["Prix", "Excellence", "Reconnaissance"],
    excerpt:
      "Notre entreprise a été distinguée par le prix de l'excellence industrielle pour son innovation et sa contribution au développement industriel au Maroc et en Afrique...",
    image: "/images/resource/news-3.jpg",
    readTime: "3 min",
    featured: false,
  },
  {
    id: "news-4",
    title:
      "Expansion en Afrique de l'Ouest : MACOBATE ouvre sa nouvelle filiale à Dakar",
    author: "Direction Internationale",
    date: "20 Octobre 2024",
    category: "Expansion",
    tags: ["Expansion", "Afrique", "Dakar"],
    excerpt:
      "Dans le cadre de sa stratégie de développement continental, MACOBATE annonce l'ouverture de sa nouvelle filiale à Dakar, renforçant sa présence en Afrique de l'Ouest...",
    image: "/images/resource/news-4.jpg",
    readTime: "4 min",
    featured: false,
  },
  {
    id: "news-5",
    title:
      "Nouveau partenariat technologique avec des leaders européens de l'automatisation",
    author: "Département R&D",
    date: "12 Octobre 2024",
    category: "Partenariats",
    tags: ["Partenariat", "Technologie", "Automatisation"],
    excerpt:
      "MACOBATE renforce ses capacités technologiques en signant un partenariat stratégique avec des leaders européens de l'automatisation industrielle...",
    image: "/images/resource/news-6.jpg",
    readTime: "3 min",
    featured: false,
  },
  {
    id: "news-6",
    title:
      "Formation de la prochaine génération : MACOBATE lance son programme d'apprentissage",
    author: "Ressources Humaines",
    date: "05 Octobre 2024",
    category: "Formation",
    tags: ["Formation", "Apprentissage", "Jeunes"],
    excerpt:
      "Fidèle à son engagement envers le développement des compétences locales, MACOBATE lance un programme d'apprentissage destiné aux jeunes ingénieurs et techniciens...",
    image: "/images/resource/news-7.jpg",
    readTime: "4 min",
    featured: false,
  },
  {
    id: "news-7",
    title:
      "Projet hydroélectrique majeur : MACOBATE équipe la nouvelle centrale de Tamesna",
    author: "Équipe Hydromécaniques",
    date: "28 Septembre 2024",
    category: "Projets",
    tags: ["Hydroélectrique", "Énergie", "Infrastructure"],
    excerpt:
      "MACOBATE a été retenu pour fournir l'ensemble des équipements hydromécaniques de la nouvelle centrale hydroélectrique de Tamesna, un projet d'envergure nationale...",
    image: "/images/resource/news-8.jpg",
    readTime: "5 min",
    featured: false,
  },
  {
    id: "news-8",
    title:
      "Développement durable : MACOBATE obtient la certification ISO 14001",
    author: "Département Qualité",
    date: "15 Septembre 2024",
    category: "Certifications",
    tags: ["ISO 14001", "Environnement", "Développement durable"],
    excerpt:
      "Dans le cadre de son engagement environnemental, MACOBATE obtient la certification ISO 14001, confirmant sa démarche de développement durable...",
    image: "/images/resource/news-9.jpg",
    readTime: "3 min",
    featured: false,
  },
  {
    id: "news-9",
    title: "Inauguration du nouveau centre de formation technique à Casablanca",
    author: "Direction Générale",
    date: "10 Septembre 2024",
    category: "Infrastructure",
    tags: ["Formation", "Centre technique", "Casablanca"],
    excerpt:
      "MACOBATE inaugure son nouveau centre de formation technique à Casablanca, équipé des dernières technologies pour former les techniciens de demain...",
    image: "/images/resource/news-10.jpg",
    readTime: "4 min",
    featured: false,
  },
];

// Fonctions utilitaires
function getUniqueCategories() {
  return [...new Set(blogArticles.map((article) => article.category))];
}

function getFeaturedArticles() {
  return blogArticles.filter((article) => article.featured);
}

function getRecentArticles(limit = 6) {
  return blogArticles.slice(0, limit);
}

// Pagination
const postsPerPage = 6;
const totalPages = Math.ceil(blogArticles.length / postsPerPage);
const currentPage = 1; // Vous pourriez le récupérer depuis un paramètre d'URL
const startIndex = (currentPage - 1) * postsPerPage;
const endIndex = startIndex + postsPerPage;
const currentPosts = blogArticles.slice(startIndex, endIndex);

// Variables pour les composants
const categories = getUniqueCategories();
const featuredArticles = getFeaturedArticles();
const recentArticles = getRecentArticles();
---

<BaseLayout
  title="Actualités - MACOBATE"
  description="Découvrez les dernières actualités, innovations et projets de MACOBATE"
  pageType="blog"
>
  <Header />
  <main>
    <!-- Page Title -->
    <section
      class="page-title"
      style="background-image:url(/images/background/6.jpg)"
    >
      <div class="auto-container">
        <ul class="page-breadcrumb" aria-label="Fil d'Ariane">
          <li><a href="/">Accueil</a></li>
          <li>Actualités</li>
        </ul>
        <h1>Actualités</h1>
      </div>
    </section>

    <!-- Blog Intro Section -->
    <section class="blog-intro-section">
      <div class="auto-container">
        <div class="sec-title centered">
          <h2>Nos dernières actualités</h2>
          <div class="separator"></div>
          <div class="text">
            Restez informé des dernières innovations, projets et développements
            de MACOBATE. Découvrez comment nous façonnons l'avenir des
            infrastructures en Afrique et au-delà.
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Articles Section -->
    {
      featuredArticles.length > 0 && (
        <section class="featured-articles-section">
          <div class="auto-container">
            <div class="sec-title">
              <h2>Articles à la une</h2>
              <div class="separator" />
            </div>

            <div class="featured-articles-container">
              {featuredArticles.map((article, index) => (
                <div
                  class={`featured-article ${index === 0 ? "main-featured" : "secondary-featured"}`}
                >
                  <div class="inner-box">
                    <div class="image-container">
                      <a href={`/blog/detailBlog#${article.id}`}>
                        <img src={article.image} alt={article.title} />
                      </a>
                      <div class="category-badge">{article.category}</div>
                    </div>
                    <div class="content-container">
                      <h3>
                        <a href={`/blog/detailBlog#${article.id}`}>
                          {article.title}
                        </a>
                      </h3>
                      <div class="article-meta">
                        <span class="author">Par {article.author}</span>
                        <span class="date">{article.date}</span>
                        <span class="read-time">
                          {article.readTime} de lecture
                        </span>
                      </div>
                      <div class="excerpt">{article.excerpt}</div>
                      <a
                        href={`/blog/detailBlog#${article.id}`}
                        class="read-more-btn"
                      >
                        Lire l'article
                        <span class="icon flaticon-arrow-pointing-to-right" />
                      </a>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </section>
      )
    }

    <!-- Blog Grid Section -->
    <section class="blog-grid-section">
      <div class="auto-container">
        <div class="row clearfix">
          <!-- Content Column -->
          <div class="content-column col-lg-8 col-md-12 col-sm-12">
            <div class="inner-column">
              <!-- Filter Tabs -->
              <div class="filter-tabs">
                <ul class="filter-tabs-list">
                  <li class="filter-tab active" data-filter="*">
                    Tous les articles
                  </li>
                  {
                    categories.map((category) => (
                      <li
                        class="filter-tab"
                        data-filter={`.${category.replace(/\s+/g, "-").toLowerCase()}`}
                      >
                        {category}
                      </li>
                    ))
                  }
                </ul>
              </div>

              <!-- Articles Grid -->
              <div class="articles-grid">
                {
                  currentPosts.map((article) => (
                    <div
                      class={`article-block ${article.category.replace(/\s+/g, "-").toLowerCase()}`}
                    >
                      <div class="inner-box">
                        <div class="image-container">
                          <a href={`/blog/detailBlog#${article.id}`}>
                            <img src={article.image} alt={article.title} />
                          </a>
                          <div class="category-label">{article.category}</div>
                          <div class="read-time-badge">{article.readTime}</div>
                        </div>
                        <div class="content">
                          <h3>
                            <a href={`/blog/detailBlog#${article.id}`}>
                              {article.title}
                            </a>
                          </h3>
                          <div class="meta-info">
                            <div class="meta-item">
                              <span class="icon flaticon-user" />
                              <span>{article.author}</span>
                            </div>
                            <div class="meta-item">
                              <span class="icon flaticon-calendar" />
                              <span>{article.date}</span>
                            </div>
                          </div>
                          <div class="excerpt">{article.excerpt}</div>
                          <div class="article-footer">
                            <div class="tags">
                              {article.tags.slice(0, 2).map((tag) => (
                                <span class="tag">{tag}</span>
                              ))}
                            </div>
                            <a
                              href={`/blog/detailBlog#${article.id}`}
                              class="read-more"
                            >
                              Lire plus
                              <span class="icon flaticon-arrow-pointing-to-right" />
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  ))
                }
              </div>

              <!-- Pagination -->
              {
                totalPages > 1 && (
                  <div class="pagination-wrapper">
                    <ul class="styled-pagination">
                      {currentPage > 1 && (
                        <li class="prev">
                          <a href={`/blog?page=${currentPage - 1}`}>
                            <span class="fa fa-angle-left" />
                          </a>
                        </li>
                      )}

                      {Array.from({ length: totalPages }).map((_, index) => (
                        <li>
                          <a
                            href={`/blog?page=${index + 1}`}
                            class={currentPage === index + 1 ? "active" : ""}
                          >
                            {index + 1}
                          </a>
                        </li>
                      ))}

                      {currentPage < totalPages && (
                        <li class="next">
                          <a href={`/blog?page=${currentPage + 1}`}>
                            <span class="fa fa-angle-right" />
                          </a>
                        </li>
                      )}
                    </ul>
                  </div>
                )
              }
            </div>
          </div>

          <!-- Sidebar Column -->
          <div class="sidebar-column col-lg-4 col-md-12 col-sm-12">
            <div class="inner-column">
              <!-- Search Widget -->
              <div class="sidebar-widget search-widget">
                <h3 class="widget-title">Rechercher</h3>
                <div class="separator"></div>
                <div class="search-form">
                  <form action="/blog" method="get">
                    <div class="form-group">
                      <input
                        type="search"
                        name="search"
                        placeholder="Rechercher un article..."
                        required
                      />
                      <button type="submit">
                        <span class="icon fa fa-search"></span>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Categories Widget -->
              <div class="sidebar-widget categories-widget">
                <h3 class="widget-title">Catégories</h3>
                <div class="separator"></div>
                <ul class="categories-list">
                  {
                    categories.map((category) => (
                      <li>
                        <a href={`/blog?category=${category}`}>{category}</a>
                        <span class="count">
                          (
                          {
                            blogArticles.filter(
                              (article) => article.category === category
                            ).length
                          }
                          )
                        </span>
                      </li>
                    ))
                  }
                </ul>
              </div>

              <!-- Recent Posts Widget -->
              <div class="sidebar-widget recent-posts-widget">
                <h3 class="widget-title">Articles récents</h3>
                <div class="separator"></div>
                <div class="recent-posts">
                  {
                    blogArticles.slice(0, 4).map((article) => (
                      <div class="post-item">
                        <div class="post-thumb">
                          <a href={`/blog/detailBlog#${article.id}`}>
                            <img src={article.image} alt={article.title} />
                          </a>
                        </div>
                        <div class="post-content">
                          <h4>
                            <a href={`/blog/detailBlog#${article.id}`}>
                              {article.title}
                            </a>
                          </h4>
                          <div class="post-meta">
                            <span class="date">{article.date}</span>
                            <span class="category">{article.category}</span>
                          </div>
                        </div>
                      </div>
                    ))
                  }
                </div>
              </div>

              <!-- Newsletter Widget -->
              <div class="sidebar-widget newsletter-widget">
                <h3 class="widget-title">Newsletter</h3>
                <div class="separator"></div>
                <div class="newsletter-content">
                  <div class="icon-container">
                    <span class="icon flaticon-email"></span>
                  </div>
                  <div class="text">
                    Restez informé de nos dernières actualités et innovations en
                    vous abonnant à notre newsletter.
                  </div>
                  <div class="newsletter-form">
                    <form action="#" method="post">
                      <div class="form-group">
                        <input
                          type="email"
                          name="email"
                          placeholder="Votre adresse email"
                          required
                        />
                        <button type="submit" class="theme-btn btn-style-one">
                          S'abonner
                          <span class="icon flaticon-arrow-pointing-to-right"
                          ></span>
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Popular Tags Widget -->
              <div class="sidebar-widget tags-widget">
                <h3 class="widget-title">Tags populaires</h3>
                <div class="separator"></div>
                <div class="tags-cloud">
                  {
                    [
                      ...new Set(
                        blogArticles.flatMap((article) => article.tags)
                      ),
                    ].map((tag) => (
                      <a href={`/blog?tag=${tag}`} class="tag-item">
                        {tag}
                      </a>
                    ))
                  }
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Newsletter CTA Section -->
    <section class="newsletter-cta-section">
      <div class="auto-container">
        <div class="newsletter-cta-box">
          <div class="row clearfix">
            <div class="col-lg-8 col-md-12">
              <div class="sec-title light">
                <h2>📧 Restez connecté</h2>
                <div class="separator"></div>
              </div>
              <div class="text">
                <p>
                  Ne manquez aucune actualité MACOBATE ! Inscrivez-vous à notre
                  newsletter pour recevoir en exclusivité nos dernières
                  innovations, projets et événements.
                </p>
              </div>
            </div>
            <div class="col-lg-4 col-md-12">
              <div class="btn-box">
                <a href="#newsletter-form" class="theme-btn btn-style-one">
                  S'abonner maintenant
                  <span class="icon flaticon-arrow-pointing-to-right"></span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Component -->
    <CallToActionSection />
  </main>
  <Footer />
</BaseLayout>

<style>
  /* Blog Intro Section */
  .blog-intro-section {
    position: relative;
    padding: 80px 0 40px;
  }

  /* Featured Articles Section */
  .featured-articles-section {
    position: relative;
    padding: 0 0 80px;
  }

  .featured-articles-container {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 30px;
    margin-top: 40px;
  }

  .featured-article.main-featured .inner-box {
    height: 100%;
  }

  .featured-article.secondary-featured {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .featured-article .inner-box {
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    transition: all 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .featured-article .inner-box:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
  }

  .featured-article .image-container {
    position: relative;
    overflow: hidden;
  }

  .main-featured .image-container {
    height: 300px;
  }

  .secondary-featured .image-container {
    height: 200px;
  }

  .featured-article .image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .featured-article .inner-box:hover .image-container img {
    transform: scale(1.05);
  }

  .category-badge {
    position: absolute;
    top: 20px;
    left: 20px;
    background-color: #1720d7;
    color: #fff;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
  }

  .featured-article .content-container {
    padding: 30px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }

  .secondary-featured .content-container {
    padding: 20px;
  }

  .featured-article h3 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 15px;
    line-height: 1.3;
  }

  .secondary-featured h3 {
    font-size: 18px;
  }

  .featured-article h3 a {
    color: #333;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .featured-article h3 a:hover {
    color: #1720d7;
  }

  .featured-article .article-meta {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
    font-size: 13px;
    color: #666;
  }

  .secondary-featured .article-meta {
    flex-direction: column;
    gap: 5px;
  }

  .featured-article .excerpt {
    color: #666;
    line-height: 1.7;
    margin-bottom: 20px;
    flex-grow: 1;
  }

  .main-featured .excerpt {
    font-size: 16px;
  }

  .secondary-featured .excerpt {
    font-size: 14px;
  }

  .read-more-btn {
    color: #1720d7;
    text-decoration: none;
    font-weight: 600;
    font-size: 14px;
    transition: color 0.3s ease;
    align-self: flex-start;
  }

  .read-more-btn:hover {
    color: #0d1aa3;
  }

  .read-more-btn .icon {
    margin-left: 8px;
    transition: transform 0.3s ease;
  }

  .read-more-btn:hover .icon {
    transform: translateX(3px);
  }

  /* Blog Grid Section */
  .blog-grid-section {
    position: relative;
    padding: 80px 0;
    background-color: #f8f9fa;
  }

  /* Filter Tabs */
  .filter-tabs {
    margin-bottom: 40px;
  }

  .filter-tabs-list {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .filter-tab {
    padding: 12px 24px;
    background-color: #fff;
    border: 2px solid #e9ecef;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
    font-weight: 500;
    color: #666;
  }

  .filter-tab.active,
  .filter-tab:hover {
    background-color: #1720d7;
    border-color: #1720d7;
    color: #fff;
  }

  /* Articles Grid */
  .articles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 30px;
    margin-bottom: 50px;
  }

  .article-block {
    transition: all 0.3s ease;
  }

  .article-block .inner-box {
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    transition: all 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .article-block .inner-box:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
  }

  .article-block .image-container {
    position: relative;
    height: 220px;
    overflow: hidden;
  }

  .article-block .image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .article-block .inner-box:hover .image-container img {
    transform: scale(1.05);
  }

  .category-label {
    position: absolute;
    top: 15px;
    left: 15px;
    background-color: #1720d7;
    color: #fff;
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
  }

  .read-time-badge {
    position: absolute;
    top: 15px;
    right: 15px;
    background-color: rgba(0, 0, 0, 0.7);
    color: #fff;
    padding: 4px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 500;
  }

  .article-block .content {
    padding: 25px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }

  .article-block h3 {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 15px;
    line-height: 1.4;
  }

  .article-block h3 a {
    color: #333;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .article-block h3 a:hover {
    color: #1720d7;
  }

  .meta-info {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
    font-size: 13px;
    color: #666;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .meta-item .icon {
    color: #1720d7;
    font-size: 12px;
  }

  .article-block .excerpt {
    color: #666;
    line-height: 1.7;
    margin-bottom: 20px;
    flex-grow: 1;
    font-size: 15px;
  }

  .article-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 15px;
    border-top: 1px solid #f1f1f1;
  }

  .tags {
    display: flex;
    gap: 8px;
  }

  .tag {
    background-color: #f8f9fa;
    color: #666;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
  }

  .read-more {
    color: #1720d7;
    text-decoration: none;
    font-size: 14px;
    font-weight: 600;
    transition: color 0.3s ease;
  }

  .read-more:hover {
    color: #0d1aa3;
  }

  .read-more .icon {
    margin-left: 5px;
    transition: transform 0.3s ease;
  }

  .read-more:hover .icon {
    transform: translateX(3px);
  }

  /* Sidebar Styles */
  .sidebar-widget {
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
    padding: 30px;
    margin-bottom: 30px;
  }

  .widget-title {
    font-size: 20px;
    font-weight: 600;
    color: #333;
    margin-bottom: 15px;
  }

  /* Search Widget */
  .search-form .form-group {
    position: relative;
  }

  .search-form input {
    width: 100%;
    height: 50px;
    padding: 0 50px 0 20px;
    border: 2px solid #e9ecef;
    border-radius: 25px;
    font-size: 14px;
    outline: none;
    transition: border-color 0.3s ease;
  }

  .search-form input:focus {
    border-color: #1720d7;
  }

  .search-form button {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #1720d7;
    cursor: pointer;
    font-size: 16px;
    transition: color 0.3s ease;
  }

  .search-form button:hover {
    color: #0d1aa3;
  }

  /* Categories Widget */
  .categories-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .categories-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid #f1f1f1;
    transition: all 0.3s ease;
  }

  .categories-list li:last-child {
    border-bottom: none;
  }

  .categories-list li:hover {
    background-color: #f8f9fa;
    margin: 0 -15px;
    padding-left: 15px;
    padding-right: 15px;
    border-radius: 8px;
  }

  .categories-list a {
    color: #666;
    text-decoration: none;
    font-size: 15px;
    font-weight: 500;
    transition: color 0.3s ease;
  }

  .categories-list a:hover {
    color: #1720d7;
  }

  .categories-list .count {
    color: #999;
    font-size: 12px;
    background-color: #f8f9fa;
    padding: 2px 8px;
    border-radius: 10px;
  }

  /* Recent Posts Widget */
  .post-item {
    display: flex;
    gap: 15px;
    padding: 15px 0;
    border-bottom: 1px solid #f1f1f1;
    transition: all 0.3s ease;
  }

  .post-item:last-child {
    border-bottom: none;
  }

  .post-item:hover {
    background-color: #f8f9fa;
    margin: 0 -15px;
    padding-left: 15px;
    padding-right: 15px;
    border-radius: 8px;
  }

  .post-thumb {
    flex-shrink: 0;
    width: 80px;
    height: 80px;
    border-radius: 10px;
    overflow: hidden;
  }

  .post-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .post-item:hover .post-thumb img {
    transform: scale(1.1);
  }

  .post-content {
    flex-grow: 1;
  }

  .post-content h4 {
    font-size: 14px;
    font-weight: 600;
    line-height: 1.4;
    margin-bottom: 8px;
  }

  .post-content h4 a {
    color: #333;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .post-content h4 a:hover {
    color: #1720d7;
  }

  .post-meta {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .post-meta .date,
  .post-meta .category {
    font-size: 12px;
    color: #999;
  }

  .post-meta .category {
    color: #1720d7;
    font-weight: 500;
  }

  /* Newsletter Widget */
  .newsletter-widget .newsletter-content {
    text-align: center;
  }

  .newsletter-widget .icon-container {
    background-color: #1720d7;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
  }

  .newsletter-widget .icon-container .icon {
    font-size: 24px;
    color: #fff;
  }

  .newsletter-widget .text {
    font-size: 14px;
    color: #666;
    line-height: 1.6;
    margin-bottom: 25px;
  }

  .newsletter-form input {
    width: 100%;
    height: 45px;
    padding: 0 20px;
    border: 2px solid #e9ecef;
    border-radius: 25px;
    font-size: 14px;
    margin-bottom: 15px;
    outline: none;
    transition: border-color 0.3s ease;
  }

  .newsletter-form input:focus {
    border-color: #1720d7;
  }

  .newsletter-form button {
    width: 100%;
  }

  /* Tags Widget */
  .tags-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .tag-item {
    background-color: #f8f9fa;
    color: #666;
    padding: 8px 15px;
    border-radius: 20px;
    text-decoration: none;
    font-size: 13px;
    font-weight: 500;
    border: 2px solid transparent;
    transition: all 0.3s ease;
  }

  .tag-item:hover {
    background-color: #1720d7;
    color: #fff;
    border-color: #1720d7;
    transform: translateY(-2px);
  }

  /* Pagination */
  .pagination-wrapper {
    display: flex;
    justify-content: center;
    margin-top: 50px;
  }

  .styled-pagination {
    display: flex;
    gap: 10px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .styled-pagination li {
    border-radius: 8px;
    overflow: hidden;
  }

  .styled-pagination a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 45px;
    height: 45px;
    color: #666;
    text-decoration: none;
    background-color: #fff;
    border: 2px solid #e9ecef;
    transition: all 0.3s ease;
    font-weight: 500;
  }

  .styled-pagination a:hover,
  .styled-pagination a.active {
    background-color: #1720d7;
    border-color: #1720d7;
    color: #fff;
    transform: translateY(-2px);
  }

  .styled-pagination .prev a,
  .styled-pagination .next a {
    border-radius: 50%;
  }

  /* Newsletter CTA Section */
  .newsletter-cta-section {
    position: relative;
    padding: 80px 0;
    background-color: #fff;
  }

  .newsletter-cta-box {
    position: relative;
    background: linear-gradient(135deg, #1720d7 0%, #0d1aa3 100%);
    border-radius: 15px;
    padding: 60px;
    overflow: hidden;
  }

  .newsletter-cta-box:before {
    content: "";
    position: absolute;
    right: 0;
    top: 0;
    height: 100%;
    width: 40%;
    background: url(/images/background/pattern-1.png) right center no-repeat;
    background-size: cover;
    opacity: 0.1;
  }

  .sec-title.light h2 {
    color: #fff;
    font-size: 32px;
  }

  .sec-title.light .separator:after {
    background-color: #fff;
  }

  .newsletter-cta-box .text {
    color: rgba(255, 255, 255, 0.9);
    font-size: 16px;
    line-height: 1.8;
    margin-bottom: 0;
  }

  .newsletter-cta-box .btn-box {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    height: 100%;
  }

  .newsletter-cta-box .theme-btn {
    background-color: #fff;
    color: #1720d7;
    border: 2px solid #fff;
  }

  .newsletter-cta-box .theme-btn:hover {
    background-color: transparent;
    color: #fff;
  }

  /* Responsive Design */
  @media only screen and (max-width: 1199px) {
    .featured-articles-container {
      grid-template-columns: 1fr;
    }

    .featured-article.secondary-featured {
      flex-direction: row;
      gap: 30px;
    }

    .secondary-featured .inner-box {
      flex-direction: row;
    }

    .secondary-featured .image-container {
      width: 200px;
      height: 150px;
      flex-shrink: 0;
    }
  }

  @media only screen and (max-width: 991px) {
    .blog-intro-section {
      padding: 60px 0 30px;
    }

    .featured-articles-section {
      padding: 0 0 60px;
    }

    .blog-grid-section {
      padding: 60px 0;
    }

    .newsletter-cta-section {
      padding: 60px 0;
    }

    .newsletter-cta-box {
      padding: 40px 30px;
    }

    .newsletter-cta-box .btn-box {
      justify-content: flex-start;
      margin-top: 30px;
    }

    .articles-grid {
      grid-template-columns: 1fr;
    }

    .filter-tabs-list {
      justify-content: center;
    }

    .featured-article.secondary-featured {
      flex-direction: column;
    }

    .secondary-featured .inner-box {
      flex-direction: column;
    }

    .secondary-featured .image-container {
      width: 100%;
      height: 200px;
    }
  }

  @media only screen and (max-width: 767px) {
    .newsletter-cta-box {
      padding: 30px 20px;
    }

    .newsletter-cta-box:before {
      display: none;
    }

    .sec-title.light h2 {
      font-size: 24px;
    }

    .sidebar-widget {
      padding: 20px;
    }

    .featured-article .content-container {
      padding: 20px;
    }

    .article-block .content {
      padding: 20px;
    }

    .filter-tabs-list {
      flex-direction: column;
      align-items: center;
    }

    .filter-tab {
      width: 100%;
      text-align: center;
      max-width: 250px;
    }

    .meta-info {
      flex-direction: column;
      gap: 8px;
    }

    .article-footer {
      flex-direction: column;
      gap: 15px;
      align-items: flex-start;
    }

    .tags {
      order: 2;
    }
  }

  @media only screen and (max-width: 480px) {
    .articles-grid {
      grid-template-columns: 1fr;
      gap: 20px;
    }

    .featured-article h3 {
      font-size: 20px;
    }

    .article-block h3 {
      font-size: 18px;
    }

    .pagination-wrapper {
      margin-top: 30px;
    }

    .styled-pagination {
      gap: 5px;
    }

    .styled-pagination a {
      width: 40px;
      height: 40px;
      font-size: 14px;
    }
  }

  /* Animation Classes */
  .fade-in {
    opacity: 0;
    transform: translateY(20px);
    transition:
      opacity 0.6s ease,
      transform 0.6s ease;
  }

  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Filter Animation */
  .article-block {
    transition: all 0.5s ease;
  }

  .article-block.hidden {
    opacity: 0;
    transform: scale(0.8);
    pointer-events: none;
  }

  /* Loading State */
  .loading {
    opacity: 0.5;
    pointer-events: none;
  }
</style>

<script is:inline>
  document.addEventListener("DOMContentLoaded", function () {
    // Filter functionality
    const filterTabs = document.querySelectorAll(".filter-tab");
    const articleBlocks = document.querySelectorAll(".article-block");

    filterTabs.forEach((tab) => {
      tab.addEventListener("click", function () {
        // Remove active class from all tabs
        filterTabs.forEach((t) => t.classList.remove("active"));
        // Add active class to clicked tab
        this.classList.add("active");

        const filter = this.getAttribute("data-filter");

        // Filter articles
        articleBlocks.forEach((block) => {
          if (
            filter === "*" ||
            block.classList.contains(filter.replace(".", ""))
          ) {
            block.classList.remove("hidden");
          } else {
            block.classList.add("hidden");
          }
        });
      });
    });

    // Search functionality
    const searchForm = document.querySelector(".search-form form");
    if (searchForm) {
      searchForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const searchTerm = this.querySelector('input[type="search"]').value;

        // Simple client-side search (in a real app, this would be server-side)
        const searchResults = performSearch(searchTerm);
        displaySearchResults(searchResults);
      });
    }

    function performSearch(term) {
      const articles = Array.from(articleBlocks);
      return articles.filter((article) => {
        const title = article.querySelector("h3 a").textContent.toLowerCase();
        const excerpt = article
          .querySelector(".excerpt")
          .textContent.toLowerCase();
        return (
          title.includes(term.toLowerCase()) ||
          excerpt.includes(term.toLowerCase())
        );
      });
    }

    function displaySearchResults(results) {
      // Hide all articles first
      articleBlocks.forEach((block) => block.classList.add("hidden"));

      // Show only search results
      results.forEach((article) => article.classList.remove("hidden"));

      // Update filter tabs to show "search results"
      filterTabs.forEach((tab) => tab.classList.remove("active"));

      // Add a temporary search indicator
      const searchIndicator = document.createElement("div");
      searchIndicator.textContent = `${results.length} résultats trouvés`;
      searchIndicator.className = "search-results-indicator";
      searchIndicator.style.cssText =
        "text-align: center; margin: 20px 0; color: #1720d7; font-weight: 600;";

      const existingIndicator = document.querySelector(
        ".search-results-indicator"
      );
      if (existingIndicator) {
        existingIndicator.remove();
      }

      document
        .querySelector(".articles-grid")
        .parentNode.insertBefore(
          searchIndicator,
          document.querySelector(".articles-grid")
        );
    }

    // Newsletter form handling
    const newsletterForms = document.querySelectorAll(".newsletter-form form");
    newsletterForms.forEach((form) => {
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        const email = this.querySelector('input[type="email"]').value;

        // Add loading state
        const button = this.querySelector("button");
        const originalText = button.innerHTML;
        button.innerHTML = "Inscription...";
        button.disabled = true;

        // Simulate API call
        setTimeout(() => {
          alert("Merci pour votre inscription à notre newsletter !");
          this.reset();
          button.innerHTML = originalText;
          button.disabled = false;
        }, 1500);
      });
    });

    // Smooth scroll for internal links
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute("href"));
        if (target) {
          target.scrollIntoView({
            behavior: "smooth",
            block: "start",
          });
        }
      });
    });

    // Scroll animations
    function animateOnScroll() {
      const elements = document.querySelectorAll(
        ".article-block, .sidebar-widget, .featured-article"
      );

      elements.forEach((element, index) => {
        const elementTop = element.getBoundingClientRect().top;
        const elementVisible = 150;

        if (elementTop < window.innerHeight - elementVisible) {
          setTimeout(() => {
            element.classList.add("fade-in", "visible");
          }, index * 100);
        }
      });
    }

    // Initialize scroll animations
    const animatedElements = document.querySelectorAll(
      ".article-block, .sidebar-widget, .featured-article"
    );
    animatedElements.forEach((element) => {
      element.classList.add("fade-in");
    });

    // Scroll event listener
    let scrollTimeout;
    window.addEventListener("scroll", function () {
      if (scrollTimeout) {
        clearTimeout(scrollTimeout);
      }
      scrollTimeout = setTimeout(animateOnScroll, 10);
    });

    // Initial animation
    setTimeout(animateOnScroll, 100);

    // Lazy loading for images
    if ("IntersectionObserver" in window) {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src || img.src;
            img.classList.remove("lazy");
            observer.unobserve(img);
          }
        });
      });

      document.querySelectorAll("img[data-src]").forEach((img) => {
        imageObserver.observe(img);
      });
    }

    // Category filtering from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const categoryFilter = urlParams.get("category");
    const searchFilter = urlParams.get("search");

    if (categoryFilter) {
      const categoryTab = Array.from(filterTabs).find(
        (tab) => tab.textContent.trim() === categoryFilter
      );
      if (categoryTab) {
        categoryTab.click();
      }
    }

    if (searchFilter) {
      const searchInput = document.querySelector(".search-form input");
      if (searchInput) {
        searchInput.value = searchFilter;
        const searchResults = performSearch(searchFilter);
        displaySearchResults(searchResults);
      }
    }

    // Dynamic loading indicator for pagination
    const paginationLinks = document.querySelectorAll(".styled-pagination a");
    paginationLinks.forEach((link) => {
      link.addEventListener("click", function (e) {
        // Add loading state to the page
        document.querySelector(".articles-grid").classList.add("loading");

        // In a real application, this would trigger an AJAX request
        // For now, we'll just simulate the loading state
        setTimeout(() => {
          document.querySelector(".articles-grid").classList.remove("loading");
        }, 500);
      });
    });

    // Enhanced hover effects for articles
    const articleBoxes = document.querySelectorAll(
      ".article-block .inner-box, .featured-article .inner-box"
    );
    articleBoxes.forEach((box) => {
      box.addEventListener("mouseenter", function () {
        this.style.transform = "translateY(-8px) scale(1.02)";
      });

      box.addEventListener("mouseleave", function () {
        this.style.transform = "translateY(0) scale(1)";
      });
    });

    // Reading time calculator
    function calculateReadingTime(text) {
      const wordsPerMinute = 200;
      const words = text.trim().split(/\s+/).length;
      const time = Math.ceil(words / wordsPerMinute);
      return `${time} min`;
    }

    // Apply reading time to articles without it
    document.querySelectorAll(".article-block").forEach((article) => {
      const readTimeBadge = article.querySelector(".read-time-badge");
      if (!readTimeBadge || !readTimeBadge.textContent.trim()) {
        const excerpt = article.querySelector(".excerpt").textContent;
        const readTime = calculateReadingTime(excerpt);
        if (readTimeBadge) {
          readTimeBadge.textContent = readTime;
        }
      }
    });

    // Auto-hide search results indicator after showing all articles
    filterTabs.forEach((tab) => {
      if (tab.getAttribute("data-filter") === "*") {
        tab.addEventListener("click", function () {
          const indicator = document.querySelector(".search-results-indicator");
          if (indicator) {
            indicator.remove();
          }
        });
      }
    });
  });
</script>
