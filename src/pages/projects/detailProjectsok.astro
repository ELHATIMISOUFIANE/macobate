---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import AppointmentForm from "../../components/AppointmentForm.astro";
import CallToActionSection from "../../components/CallToActionSection.astro";

const projects = [
  {
    id: "dams-hydraulic-infrastructure",
    title: "Dams & Hydraulic Infrastructure",
    category: "Infrastructure Hydraulique",
    description: `
      <p>MACOBATE is one of the leading players in hydraulic engineering in Morocco. Our expertise covers the design, manufacturing and installation of hydromechanical equipment for dams, hydroelectric plants and hydraulic infrastructure.</p>
      
      <p>Our expertise includes:</p>
      <ul>
        <li><strong>Gates of all types</strong>: radial, sluice, butterfly</li>
        <li><strong>Penstocks</strong> and steel linings</li>
        <li><strong>Intake screens and trash racks</strong></li>
        <li><strong>Lifting and control systems</strong></li>
      </ul>
      
      <p>Major projects completed:</p>
      <ol>
        <li><strong>Oued El Makhazine Dam</strong>: Complete hydromechanical equipment for spillway</li>
        <li><strong>Al Massira Dam</strong>: Renovation of radial gates and control systems</li>
        <li><strong>Lalla Takerkoust Dam</strong>: Installation of penstocks and bifurcations</li>
        <li><strong>Sidi Mohamed Ben Abdellah Dam</strong>: Gates and regulation equipment</li>
      </ol>
      
      <p>Each project is carried out according to the highest quality standards, with rigorous testing and particular attention to durability under demanding operating conditions. We also provide maintenance and rehabilitation of existing equipment to extend their service life.</p>
    `,
    image: "/images/projects/barrages-hydrauliques.jpg",
    features: [
      "Over 30 dams equipped in Morocco",
      "Complete expertise from component to integrated system",
      "Ability to intervene in difficult conditions",
      "Tailor-made solutions for each project",
      "Preventive maintenance and rehabilitation",
    ],
    client: "Ministry of Equipment and Water, ONEE",
    location: "Several regions of Morocco",
    year: "1980-present",
  },
  {
    id: "pumping-treatment-stations",
    title: "Pumping & Treatment Stations",
     category: "Traitement d'Eau",
    description: `
      <p>MACOBATE designs and builds complete water pumping and treatment stations, from studies to commissioning. Our integrated approach combines mechanical, hydraulic, electrical and automation expertise to deliver efficient and sustainable solutions.</p>
      
      <p>Our achievements include:</p>
      <ul>
        <li><strong>Potable water pumping stations</strong> from small to large capacity</li>
        <li><strong>Conventional and modular water treatment plants</strong></li>
        <li><strong>Wastewater treatment plants</strong></li>
        <li><strong>Reverse osmosis desalination plants</strong></li>
      </ul>
      
      <p>Reference projects:</p>
      <ol>
        <li><strong>SP2 Pumping Station - Agadir</strong>: Design and construction of a 1000 l/s potable water pumping station with complete electromechanical equipment</li>
        <li><strong>Bouskoura Treatment Plant</strong>: Installation of a 100 l/s MWS modular station for potable water</li>
        <li><strong>Skhirat-Témara Pumping Station</strong>: Hydromechanical and electrical equipment for 500 l/s station</li>
        <li><strong>El Jadida Wastewater Treatment Plant</strong>: Supply and installation of mechanical and electrical equipment</li>
      </ol>
      
      <p>Our stations are distinguished by their reliability, energy efficiency and ease of operation. We integrate advanced automation and remote control technologies, enabling optimal supervision and preventive maintenance.</p>
    `,
    image: "/images/projects/stations-pompage-traitement.jpg",
    features: [
      "Optimized hydraulic design",
      "Local manufacturing of mechanical equipment",
      "Turnkey solutions up to commissioning",
      "Intelligent control systems",
      "Energy efficiency and sustainability",
    ],
    client: "ONEE, Autonomous Agencies, Territorial Communities",
    location: "National & International",
    year: "1990-present",
  },
  {
    id: "industrial-infrastructure",
    title: "Industrial Infrastructure",
    category: "Industrie",
    description: `
      <p>MACOBATE develops complex industrial projects for various strategic sectors. Our expertise in steel construction, pressure equipment and process integration enables us to realize complete and efficient industrial infrastructure.</p>
      
      <p>Our offering covers:</p>
      <ul>
        <li><strong>Industrial buildings</strong> and steel structures</li>
        <li><strong>Storage tanks and silos</strong></li>
        <li><strong>Process units</strong> and special equipment</li>
        <li><strong>Industrial piping</strong> and complex networks</li>
      </ul>
      
      <p>Major achievements:</p>
      <ol>
        <li><strong>Jorf Lasfar Phosphate Plant</strong>: Construction of steel structures, pipe racks and process equipment</li>
        <li><strong>Tanger Med Port Terminal</strong>: Steel structures and storage tanks</li>
        <li><strong>Agadir Desalination Unit</strong>: Manufacturing and installation of pressure tanks and piping systems</li>
        <li><strong>Settat Cement Plant</strong>: Steel silos and conveyor structures</li>
      </ol>
      
      <p>Our commitment to quality and safety is at the heart of every project. We operate in demanding industrial environments with high manufacturing and installation standards, ensuring compliance with international standards and the sustainability of installations.</p>
    `,
    image: "/images/projects/infrastructures-industrielles.jpeg",
    features: [
      "Multi-trade integration: mechanical, electrical, process",
      "Expertise in ATEX environments and severe conditions",
      "Certified manufacturing ISO 9001, EN 1090, ASME",
      "Energy optimization solutions",
      "Strict adherence to industrial schedules",
    ],
    client: "OCP, ONEE, Private Industries",
    location: "Morocco & Export",
    year: "1985-present",
  },
  {
    id: "renewable-energy",
    title: "Renewable Energy",
     category: "Énergie",
    description: `
      <p>MACOBATE is committed to the energy transition by developing renewable energy projects adapted to specific client needs. Our technical expertise enables us to integrate sustainable energy solutions into industrial and infrastructure projects.</p>
      
      <p>Our intervention areas include:</p>
      <ul>
        <li><strong>Autonomous and hybrid solar pumping systems</strong></li>
        <li><strong>Hybrid energy stations</strong> (solar-diesel) for remote sites</li>
        <li><strong>Equipment for small hydroelectric plants</strong></li>
        <li><strong>Energy efficiency solutions</strong> for industrial installations</li>
      </ul>
      
      <p>Representative projects:</p>
      <ol>
        <li><strong>Taroudant Solar Pumping Station</strong>: Installation of solar-powered pumps for irrigation, 50 kWp capacity</li>
        <li><strong>Hybrid system for Dakhla water treatment station</strong>: Integration of 100 kWp solar with diesel backup</li>
        <li><strong>Ifrane Micro-hydroelectric plant</strong>: Hydromechanical equipment for energy valorization</li>
        <li><strong>Tafilalet Rural electrification project</strong>: Autonomous systems for isolated villages</li>
      </ol>
      
      <p>Our approach aims to maximize our clients' energy autonomy while reducing their carbon footprint. We design robust systems, adapted to local conditions and easy to maintain, with a particular focus on skills transfer to operating teams.</p>
    `,
    image: "/images/projects/energie-renouvelable.jpg",
    features: [
      "Custom energy solutions",
      "Optimized integration into existing processes",
      "Production monitoring and optimization systems",
      "Total cost of ownership (TCO) approach",
      "Expertise in remote sites and difficult climatic conditions",
    ],
    client: "ONEE, MASEN, Communities, Private Sector",
    location: "Morocco & Sub-Saharan Africa",
    year: "2010-present",
  },
  {
    id: "export-africa-projects",
    title: "Export & Africa Projects",
    category: "International",
    description: `
      <p>MACOBATE exports its Moroccan expertise across Africa, bringing solutions adapted to the continent's specific challenges. Our multidisciplinary expertise enables us to carry out complete projects in complex environments and remote areas.</p>
      
      <p>Our export offering includes:</p>
      <ul>
        <li><strong>Mobile water treatment stations</strong> MWS adapted to African contexts</li>
        <li><strong>Hydromechanical equipment</strong> for dams and hydraulic structures</li>
        <li><strong>Autonomous energy solutions</strong> for unconnected areas</li>
        <li><strong>Industrial infrastructure</strong> and process equipment</li>
      </ul>
      
      <p>Emblematic projects:</p>
      <ol>
        <li><strong>Bamako Water Treatment Station (Mali)</strong>: Supply and installation of MWS modular stations for potable water</li>
        <li><strong>Hydromechanical Equipment - Kandadji Dam (Niger)</strong>: Gates and control devices</li>
        <li><strong>Mauritania Desalination Units</strong>: Water treatment solutions for coastal areas</li>
        <li><strong>Senegal Solar Pumping Systems</strong>: Installations for rural villages</li>
      </ol>
      
      <p>Our African approach is distinguished by adaptation to local realities: robust design for difficult environments, ease of maintenance, thorough training of local teams and responsive after-sales service. We actively contribute to technology transfer and local skills development.</p>
    `,
    image: "/images/projects/station-eau-kabala-mali.jpg",
    features: [
      "Solutions adapted to African contexts",
      "Mobile intervention teams for all of Africa",
      "Thorough training of local operators",
      "Mastered international logistics",
      "Respect for international standards in local context",
    ],
    client:
      "African Governments, Development Agencies, Local Companies",
    location: "West and Central Africa",
    year: "2000-present",
  },
  {
    id: "marine-equipment",
    title: "Marine Equipment",
    category: "Maritime",
    description: `
      <p>MACOBATE designs and manufactures specialized equipment for port and marine infrastructure. Our expertise in metalwork in marine environments enables us to provide sustainable solutions adapted to demanding coastal conditions.</p>
      
      <p>Our product range includes:</p>
      <ul>
        <li><strong>Port steel structures</strong> and equipment supports</li>
        <li><strong>Submarine pipes and sea outfalls</strong> in protected steel</li>
        <li><strong>Marine hydraulic gates and equipment</strong></li>
        <li><strong>Desalination systems for coastal areas</strong></li>
      </ul>
      
      <p>Significant projects:</p>
      <ol>
        <li><strong>Port of Casablanca</strong>: Manufacturing and installation of special steel structures</li>
        <li><strong>Tanger Marine Outfall</strong>: Pipes and protection equipment</li>
        <li><strong>Jorf Lasfar Seawater Intake System</strong>: Hydromechanical equipment and structures</li>
        <li><strong>Nador West Med Port Terminal</strong>: Specialized steel components</li>
      </ol>
      
      <p>Our marine equipment is designed with particular attention to corrosion resistance, using suitable materials (duplex stainless steel, special coatings) and advanced cathodic protection techniques. We ensure exceptional durability even in the most aggressive environments.</p>
    `,
    image: "/images/projects/equipements-maritimes.jpg",
    features: [
      "Expertise in marine corrosion and protection",
      "Specific design for coastal conditions",
      "Use of special steels and resistant alloys",
      "International marine certifications",
      "Specialized teams for port interventions",
    ],
    client: "ANP, Ministry of Equipment, Port Operators",
    location: "Coastal areas of Morocco",
    year: "1995-present",
  },
  {
    id: "industry-process",
    title: "Industry & Process",
    category: "Process",
    description: `
      <p>MACOBATE develops complete industrial solutions including the design and realization of custom process equipment. Our multidisciplinary expertise enables us to intervene in various sectors requiring specific and efficient equipment.</p>
      
      <p>Our industrial offering includes:</p>
      <ul>
        <li><strong>Process reactors and vessels</strong> in different materials</li>
        <li><strong>Heat exchangers</strong> and heat transfer equipment</li>
        <li><strong>Integrated process skids</strong> and modular units</li>
        <li><strong>Industrial filtration and separation systems</strong></li>
      </ul>
      
      <p>Outstanding industrial achievements:</p>
      <ol>
        <li><strong>OCP Phosphoric Acid Treatment Unit</strong>: Manufacturing of special reactors and exchangers</li>
        <li><strong>Process skids for food industry Marrakech</strong>: Stainless steel units with automation</li>
        <li><strong>Chemical industry equipment Mohammedia</strong>: Manufacturing of pressure vessels and reactors</li>
        <li><strong>Industrial filtration systems Tanger</strong>: Complete units for free zone</li>
      </ol>
      
      <p>Our strength lies in our ability to integrate process design, mechanical manufacturing and automation into turnkey industrial solutions. We guarantee compliance with sector standards (pharmaceutical, food, chemical) and complete traceability of our manufacturing.</p>
    `,
    image: "/images/projects/industrie-process.jpg",
    features: [
      "Mastery of complex industrial processes",
      "Local manufacturing capacity for special equipment",
      "Expertise in specific materials (stainless steel, duplex, alloys)",
      "Integrated automation and control systems",
      "Complete technical documentation and performance validation",
    ],
    client: "Diversified industrial sectors (chemical, agri-food, mining)",
    location: "Morocco & International",
    year: "1985-present",
  },
];
// Liste des ID des projets pour vérification
const projectIds = projects.map((project) => project.id);
---

<BaseLayout title="Nos Projets - MACOBATE">
  <Header />
  <main>
    <!-- Page Title -->
    <section class="page-title" style="background-image:url(/images/background/6.jpg)">
      <div class="auto-container">
        <ul class="page-breadcrumb" aria-label="Fil d'Ariane">
          <li><a href="/">Accueil</a></li>
          <li><a href="/projects/allProjects">Projets</a></li>
          <li>Nos Projets</li>
        </ul>
        <h1>Nos Projets</h1>
      </div>
    </section>

    <!-- Projects Detail Section -->
    <section class="projects-detail-section">
      <div class="auto-container">
        <div class="row clearfix">
          
          <!-- Sidebar Projects Menu -->
          <div class="sidebar-column col-lg-3 col-md-4 col-sm-12">
            <div class="inner-column">
              
              <!-- Projects Navigation -->
              <div class="projects-list fade-in">
                <h3>Tous nos projets</h3>
                <div class="separator"></div>
                <ul aria-label="Liste des projets">
                  {projects.map((project) => (
                    <li id={`menu-item-${project.id}`}>
                      <a
                        href={`#${project.id}`}
                        class="project-link"
                        data-project-id={project.id}
                      >
                        <span class="project-icon">
                          <i class="flaticon-engineering"></i>
                        </span>
                        <span class="project-text">{project.title}</span>
                        <span class="project-arrow">
                          <i class="flaticon-arrow-pointing-to-right"></i>
                        </span>
                      </a>
                    </li>
                  ))}
                </ul>
              </div>

              <!-- Project Stats -->
              <div class="sidebar-widget stats-widget fade-in">
                <h3 class="widget-title">Projets en chiffres</h3>
                <div class="separator"></div>
                <div class="stats-container">
                  <div class="stat-item">
                    <div class="stat-icon">
                      <i class="flaticon-factory"></i>
                    </div>
                    <div class="stat-content">
                      <div class="stat-number">200+</div>
                      <div class="stat-label">Projets réalisés</div>
                    </div>
                  </div>
                  <div class="stat-item">
                    <div class="stat-icon">
                      <i class="flaticon-globe"></i>
                    </div>
                    <div class="stat-content">
                      <div class="stat-number">15</div>
                      <div class="stat-label">Pays d'intervention</div>
                    </div>
                  </div>
                  <div class="stat-item">
                    <div class="stat-icon">
                      <i class="flaticon-award"></i>
                    </div>
                    <div class="stat-content">
                      <div class="stat-number">40+</div>
                      <div class="stat-label">Années d'expérience</div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Help Box -->
              <div class="help-box fade-in">
                <div class="help-icon">
                  <i class="flaticon-engineering"></i>
                </div>
                <h4>Votre projet nous intéresse</h4>
                <p>Notre équipe commerciale est à votre disposition pour étudier votre projet et vous proposer une solution sur mesure.</p>
                <a href="#" class="theme-btn btn-style-one" data-toggle="modal" data-target="#schedule-box">
                  Demander un devis
                  <span class="icon flaticon-arrow-pointing-to-right"></span>
                </a>
              </div>

            </div>
          </div>

          <!-- Project Content Column -->
          <div class="content-column col-lg-9 col-md-8 col-sm-12">
            <div class="inner-column">
              
              {projects.map((project, index) => (
                <div id={project.id} class="project-detail fade-in">
                  
                  <!-- Project Header -->
                  <div class="project-header">
                    <div class="category-badge">{project.category}</div>
                    <h2 class="project-title">{project.title}</h2>
                    
                    <div class="project-meta-grid">
                      <div class="meta-item">
                        <div class="meta-icon">
                          <i class="flaticon-user"></i>
                        </div>
                        <div class="meta-content">
                          <span class="label">Client</span>
                          <span class="value">{project.client}</span>
                        </div>
                      </div>
                      
                      <div class="meta-item">
                        <div class="meta-icon">
                          <i class="flaticon-location"></i>
                        </div>
                        <div class="meta-content">
                          <span class="label">Localisation</span>
                          <span class="value">{project.location}</span>
                        </div>
                      </div>
                      
                      <div class="meta-item">
                        <div class="meta-icon">
                          <i class="flaticon-calendar"></i>
                        </div>
                        <div class="meta-content">
                          <span class="label">Période</span>
                          <span class="value">{project.year}</span>
                        </div>
                      </div>
                      
                      <div class="meta-item">
                        <div class="meta-icon">
                          <i class="flaticon-clock"></i>
                        </div>
                        <div class="meta-content">
                          <span class="label">Durée</span>
                          <span class="value">{project.duration}</span>
                        </div>
                      </div>
                      
                      <div class="meta-item">
                        <div class="meta-icon">
                          <i class="flaticon-check"></i>
                        </div>
                        <div class="meta-content">
                          <span class="label">Statut</span>
                          <span class="value status-active">{project.status}</span>
                        </div>
                      </div>
                    </div>
                    
                    <div class="separator"></div>
                  </div>

                  <!-- Project Image with Gallery -->
                  <div class="project-image-section">
                    <div class="main-image">
                      <img
                        data-src={project.image}
                        alt={`Illustration du projet ${project.title}`}
                        class="img-fluid lazy-image"
                        loading="lazy"
                      />
                      <div class="image-overlay">
                        <button class="gallery-btn" data-project-id={project.id}>
                          <i class="flaticon-gallery"></i>
                          <span>Voir la galerie</span>
                        </button>
                      </div>
                    </div>
                    
                    {project.gallery && project.gallery.length > 1 && (
                      <div class="image-gallery" id={`gallery-${project.id}`} style="display: none;">
                        <div class="gallery-header">
                          <h4>Galerie du projet</h4>
                          <button class="close-gallery" data-project-id={project.id}>
                            <i class="fa fa-times"></i>
                          </button>
                        </div>
                        <div class="gallery-grid">
                          {project.gallery.map((image, imgIndex) => (
                            <div class="gallery-item">
                              <img
                                data-src={image}
                                alt={`${project.title} - Image ${imgIndex + 1}`}
                                class="lazy-image"
                                loading="lazy"
                              />
                            </div>
                          ))}
                        </div>
                      </div>
                    )}
                  </div>

                  <!-- Project Content -->
                  <div class="project-content">
                    <div class="text-content" set:html={project.description} />
                  </div>

                  <!-- Technical Specifications -->
                  {project.technicalSpecs && (
                    <div class="technical-specs-box">
                      <h3>Spécifications techniques</h3>
                      <div class="specs-grid">
                        {Object.entries(project.technicalSpecs).map(([key, value]) => (
                          <div class="spec-item">
                            <div class="spec-label">{key}</div>
                            <div class="spec-value">{value}</div>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}

                  <!-- Features Box -->
                  <div class="features-box">
                    <h3>Points forts du projet</h3>
                    <div class="features-grid">
                      {project.features.map((feature, featureIndex) => (
                        <div class="feature-item fade-in" style={`animation-delay: ${featureIndex * 0.1}s`}>
                          <div class="feature-icon">
                            <i class="flaticon-tick"></i>
                          </div>
                          <div class="feature-content">
                            <span class="feature-text">{feature}</span>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>

                  <!-- Project Actions -->
                  <div class="project-actions">
                    <div class="actions-content">
                      <div class="action-text">
                        <h4>Intéressé par un projet similaire ?</h4>
                        <p>Contactez-nous pour discuter de votre projet et obtenir un devis personnalisé.</p>
                      </div>
                      <div class="action-buttons">
                        <a href="#" class="theme-btn btn-style-one" data-toggle="modal" data-target="#schedule-box">
                          Demander un devis
                          <span class="icon flaticon-arrow-pointing-to-right"></span>
                        </a>
                        <a href="/contact" class="theme-btn btn-style-two">
                          Nous contacter
                          <span class="icon flaticon-phone-call"></span>
                        </a>
                      </div>
                    </div>
                  </div>

                </div>
              ))}

            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Related Projects Section -->
    <section class="related-projects-section">
      <div class="auto-container">
        <div class="sec-title centered">
          <h2>Projets connexes</h2>
          <div class="separator"></div>
          <div class="text">
            Découvrez d'autres réalisations MACOBATE dans des domaines complémentaires
          </div>
        </div>
        
        <div class="related-projects-carousel">
          {projects.slice(0, 4).map((project, index) => (
            <div class="related-project-item fade-in" style={`animation-delay: ${index * 0.1}s`}>
              <div class="project-card">
                <div class="card-image">
                  <img
                    data-src={project.image}
                    alt={project.title}
                    class="lazy-image"
                    loading="lazy"
                  />
                  <div class="card-overlay">
                    <a href={`#${project.id}`} class="view-project-btn">
                      <i class="flaticon-arrow-pointing-to-right"></i>
                    </a>
                  </div>
                </div>
                <div class="card-content">
                  <div class="card-category">{project.category}</div>
                  <h4><a href={`#${project.id}`}>{project.title}</a></h4>
                  <div class="card-meta">
                    <span class="location">{project.location}</span>
                    <span class="year">{project.year}</span>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Quote Form Modal -->
    <div class="modal fade" id="schedule-box" tabindex="-1" role="dialog">
      <div class="modal-dialog popup-container container" role="document">
        <div class="modal-content">
          <div class="appoinment_form_wrapper clear_fix">
            <button type="button" class="close" data-dismiss="modal" aria-label="Fermer">
              <i class="fa fa-times" aria-hidden="true"></i>
            </button>
            <div class="get-quote-form" style="background-image:url(/images/background/13.jpg)">
              <div class="inner-box">
                <div class="sec-title">
                  <div class="clearfix">
                    <div class="pull-left">
                      <h2>Demander un Devis</h2>
                      <div class="separator centered"></div>
                    </div>
                    <div class="pull-left">
                      <div class="text">
                        Obtenez un devis gratuit pour vos projets industriels ou d'ingénierie. Nous sommes disponibles 24h/7j.
                      </div>
                    </div>
                  </div>
                </div>

                <div class="quote-form style-two">
                  <form method="post" action="/api/contact">
                    <div class="row clearfix">
                      <div class="form-group col-md-6 col-sm-6 col-xs-12">
                        <input type="text" name="name" placeholder="Votre Nom" required />
                      </div>
                      <div class="form-group col-md-6 col-sm-6 col-xs-12">
                        <input type="text" name="company" placeholder="Nom de l'Entreprise" required />
                      </div>
                      <div class="form-group col-md-6 col-sm-6 col-xs-12">
                        <input type="text" name="phone" placeholder="Téléphone" required />
                      </div>
                      <div class="form-group col-md-6 col-sm-6 col-xs-12">
                        <select class="custom-select-box" name="service">
                          <option>Sélectionnez le Service Souhaité</option>
                          <option>Charpente Métallique</option>
                          <option>Appareils à pression</option>
                          <option>Réservoirs de Stockage</option>
                          <option>Équipements Hydromécaniques</option>
                          <option>Projets Clé en Main</option>
                          <option>Traitement de l'eau</option>
                          <option>Électricité & Automatismes</option>
                        </select>
                      </div>
                      <div class="form-group col-md-12 col-sm-12 col-xs-12">
                        <textarea name="message" placeholder="Votre Message..."></textarea>
                      </div>
                      <div class="form-group col-md-12 col-sm-12 col-xs-12">
                        <button class="theme-btn btn-style-one" type="submit" name="submit-form">
                          Envoyer 
                          <span class="icon flaticon-arrow-pointing-to-right"></span>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <CallToActionSection />
    <AppointmentForm />
  </main>
  <Footer />
</BaseLayout>

<style>
  html {
    scroll-behavior: smooth;
  }

  /* Projects Detail Section */
  .projects-detail-section {
    padding: 80px 0;
    background-color: #f8f9fa;
  }

  /* Sidebar Styles */
  .projects-list {
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08);
    padding: 30px;
    margin-bottom: 30px;
    transition: all 0.3s ease;
  }

  .projects-list:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
  }

  .projects-list h3 {
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 15px;
    color: #333;
  }

  .projects-list ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .projects-list ul li {
    margin-bottom: 8px;
    transition: all 0.3s ease;
  }

  .projects-list ul li:last-child {
    margin-bottom: 0;
  }

  .projects-list ul li a {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    color: #666;
    font-size: 14px;
    font-weight: 500;
    text-decoration: none;
    border-radius: 8px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .projects-list ul li a:before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 0;
    height: 100%;
    background: linear-gradient(135deg, #1720d7, rgba(23, 32, 215, 0.1));
    transition: width 0.3s ease;
    z-index: 0;
  }

  .projects-list ul li a:hover:before,
  .projects-list ul li a.active:before {
    width: 100%;
  }

  .projects-list ul li a > * {
    position: relative;
    z-index: 1;
  }

  .project-icon {
    margin-right: 12px;
    font-size: 16px;
    color: #1720d7;
  }

  .project-text {
    flex-grow: 1;
    transition: color 0.3s ease;
  }

  .project-arrow {
    opacity: 0;
    transform: translateX(-10px);
    transition: all 0.3s ease;
    color: #1720d7;
  }

  .projects-list ul li a:hover,
  .projects-list ul li a.active {
    color: #fff;
    transform: translateX(5px);
  }

  .projects-list ul li a:hover .project-arrow,
  .projects-list ul li a.active .project-arrow {
    opacity: 1;
    transform: translateX(0);
  }

  /* Sidebar Widgets */
  .sidebar-widget {
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08);
    padding: 30px;
    margin-bottom: 30px;
    transition: all 0.3s ease;
  }

  .sidebar-widget:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
  }

  .widget-title {
    font-size: 20px;
    font-weight: 600;
    color: #333;
    margin-bottom: 15px;
  }

  /* Stats Widget */
  .stats-container {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .stat-item {
    display: flex;
    align-items: center;
    padding: 20px;
    background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);
    border-radius: 10px;
    border-left: 4px solid #1720d7;
    transition: all 0.3s ease;
  }

  .stat-item:hover {
    transform: translateX(5px);
    box-shadow: 0 5px 15px rgba(23, 32, 215, 0.1);
  }

  .stat-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #1720d7, #0d1aa3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    color: #fff;
    font-size: 20px;
  }

  .stat-content {
    flex-grow: 1;
  }

  .stat-number {
    font-size: 24px;
    font-weight: 700;
    color: #1720d7;
    margin-bottom: 5px;
  }

  .stat-label {
    font-size: 13px;
    color: #666;
    font-weight: 500;
  }

  /* Help Box */
  .help-box {
    background: linear-gradient(135deg, #1720d7 0%, #0d1aa3 100%);
    color: white;
    border-radius: 12px;
    padding: 30px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  .help-box:before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: float 6s ease-in-out infinite;
  }

  .help-icon {
    width: 60px;
    height: 60px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 24px;
    color: #fff;
  }

  .help-box h4 {
    font-size: 20px;
    margin-bottom: 15px;
    color: white;
  }

  .help-box p {
    margin-bottom: 25px;
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
  }

  .help-box .theme-btn {
    background-color: white;
    color: #1720d7;
    border: 2px solid white;
  }

  .help-box .theme-btn:hover {
    background-color: transparent;
    color: white;
  }

  /* Project Detail Content */
  .project-detail {
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08);
    padding: 40px;
    margin-bottom: 40px;
    display: none;
    transition: all 0.3s ease;
  }

  .project-detail.active {
    display: block;
  }

  /* Project Header */
  .project-header {
    margin-bottom: 40px;
  }

  .category-badge {
    display: inline-block;
    background: linear-gradient(135deg, #1720d7, #0d1aa3);
    color: #fff;
    padding: 8px 20px;
    border-radius: 25px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 20px;
    letter-spacing: 0.5px;
  }

  .project-title {
    font-size: 32px;
    font-weight: 700;
    color: #333;
    margin-bottom: 25px;
    line-height: 1.3;
  }

  .project-meta-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 25px;
  }

  .meta-item {
    display: flex;
    align-items: center;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 10px;
    transition: all 0.3s ease;
  }

  .meta-item:hover {
    background-color: #e9ecef;
    transform: translateY(-2px);
  }

  .meta-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #1720d7, #0d1aa3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    color: #fff;
    font-size: 14px;
  }

  .meta-content {
    display: flex;
    flex-direction: column;
  }

  .meta-content .label {
    font-size: 12px;
    color: #999;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .meta-content .value {
    font-size: 14px;
    color: #333;
    font-weight: 600;
    margin-top: 2px;
  }

  .status-active {
    color: #28a745 !important;
  }

  /* Project Image Section */
  .project-image-section {
    margin-bottom: 40px;
  }

  .main-image {
    position: relative;
    border-radius: 12px;
    overflow: hidden;
    aspect-ratio: 16 / 9;
    background-color: #f0f0f0;
  }

  .main-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: all 0.3s ease;
  }

  .main-image:hover .image-overlay {
    opacity: 1;
  }

  .main-image:hover img {
    transform: scale(1.05);
  }

  .gallery-btn {
    background: rgba(255, 255, 255, 0.9);
    color: #1720d7;
    border: none;
    padding: 15px 25px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .gallery-btn:hover {
    background: #1720d7;
    color: #fff;
    transform: scale(1.05);
  }

  /* Image Gallery */
  .image-gallery {
    margin-top: 20px;
    background: #fff;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }

  .gallery-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #e9ecef;
  }

  .gallery-header h4 {
    color: #333;
    font-weight: 600;
    margin: 0;
  }

  .close-gallery {
    background: none;
    border: none;
    color: #999;
    font-size: 18px;
    cursor: pointer;
    padding: 5px;
    border-radius: 50%;
    transition: all 0.3s ease;
  }

  .close-gallery:hover {
    background: #f8f9fa;
    color: #1720d7;
  }

  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
  }

  .gallery-item {
    aspect-ratio: 4 / 3;
    border-radius: 8px;
    overflow: hidden;
    background-color: #f0f0f0;
    cursor: pointer;
    transition: transform 0.3s ease;
  }

  .gallery-item:hover {
    transform: scale(1.05);
  }

  .gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Project Content */
  .project-content {
    margin-bottom: 40px;
  }

  .text-content {
    color: #555;
    line-height: 1.8;
    font-size: 16px;
  }

  .text-content h3 {
    font-size: 22px;
    font-weight: 600;
    color: #333;
    margin: 30px 0 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid #1720d7;
    display: inline-block;
  }

  .text-content p {
    margin-bottom: 20px;
  }

  .text-content ul,
  .text-content ol {
    margin-bottom: 25px;
    padding-left: 20px;
  }

  .text-content li {
    margin-bottom: 12px;
    position: relative;
  }

  .text-content ul li:before {
    content: "→";
    color: #1720d7;
    font-weight: bold;
    position: absolute;
    left: -20px;
  }

  .text-content strong {
    color: #333;
    font-weight: 600;
  }

  /* Technical Specifications */
  .technical-specs-box {
    background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);
    border-radius: 12px;
    padding: 30px;
    margin-bottom: 35px;
    border-left: 4px solid #1720d7;
  }

  .technical-specs-box h3 {
    font-size: 20px;
    font-weight: 600;
    color: #333;
    margin-bottom: 25px;
    display: flex;
    align-items: center;
  }

  .technical-specs-box h3:before {
    content: "⚙️";
    margin-right: 10px;
    font-size: 24px;
  }

  .specs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
  }

  .spec-item {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
  }

  .spec-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
  }

  .spec-label {
    font-size: 12px;
    color: #999;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
  }

  .spec-value {
    font-size: 16px;
    color: #1720d7;
    font-weight: 600;
  }

  /* Features Box */
  .features-box {
    background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);
    border-radius: 12px;
    padding: 35px;
    margin-bottom: 40px;
    border: 1px solid #e9ecef;
  }

  .features-box h3 {
    font-size: 22px;
    font-weight: 600;
    color: #333;
    margin-bottom: 30px;
    text-align: center;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
  }

  .feature-item {
    display: flex;
    align-items: center;
    padding: 20px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    border-left: 4px solid transparent;
  }

  .feature-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    border-left-color: #1720d7;
  }

  .feature-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #1720d7, #0d1aa3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    color: #fff;
    font-size: 18px;
    flex-shrink: 0;
  }

  .feature-content {
    flex-grow: 1;
  }

  .feature-text {
    font-size: 15px;
    color: #333;
    font-weight: 500;
    line-height: 1.5;
  }

  /* Project Actions */
  .project-actions {
    background: linear-gradient(135deg, #1720d7 0%, #0d1aa3 100%);
    border-radius: 12px;
    padding: 40px;
    text-align: center;
    color: white;
    position: relative;
    overflow: hidden;
  }

  .project-actions:before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: float 6s ease-in-out infinite;
  }

  .actions-content {
    position: relative;
    z-index: 1;
  }

  .action-text h4 {
    font-size: 24px;
    margin-bottom: 15px;
    color: white;
  }

  .action-text p {
    font-size: 16px;
    margin-bottom: 30px;
    color: rgba(255, 255, 255, 0.9);
  }

  .action-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .project-actions .theme-btn {
    padding: 15px 30px;
    font-weight: 600;
  }

  .theme-btn.btn-style-two {
    background-color: transparent;
    border: 2px solid white;
    color: white;
  }

  .theme-btn.btn-style-two:hover {
    background-color: white;
    color: #1720d7;
  }

  /* Related Projects Section */
  .related-projects-section {
    padding: 80px 0;
    background-color: #fff;
  }

  .related-projects-carousel {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    margin-top: 50px;
  }

  .related-project-item {
    transition: all 0.3s ease;
  }

  .project-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
  }

  .project-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
  }

  .card-image {
    position: relative;
    aspect-ratio: 16 / 10;
    overflow: hidden;
  }

  .card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .card-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(23, 32, 215, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: all 0.3s ease;
  }

  .project-card:hover .card-overlay {
    opacity: 1;
  }

  .project-card:hover .card-image img {
    transform: scale(1.1);
  }

  .view-project-btn {
    width: 60px;
    height: 60px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .view-project-btn:hover {
    background: white;
    color: #1720d7;
    transform: scale(1.1);
  }

  .card-content {
    padding: 25px;
  }

  .card-category {
    font-size: 12px;
    color: #1720d7;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 10px;
  }

  .card-content h4 {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 15px;
    line-height: 1.4;
  }

  .card-content h4 a {
    color: #333;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .card-content h4 a:hover {
    color: #1720d7;
  }

  .card-meta {
    display: flex;
    justify-content: space-between;
    font-size: 13px;
    color: #666;
  }

  /* Lazy Loading & Images */
  .lazy-image {
    opacity: 0;
    transition: opacity 0.6s ease;
  }

  .lazy-image.loaded {
    opacity: 1;
  }

  .lazy-image.loading {
    background-color: #f0f0f0;
    background-image: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
  }

  @keyframes loading {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* Animation Classes */
  .fade-in {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Float Animation */
  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  /* Responsive Design */
  @media only screen and (max-width: 1199px) {
    .project-meta-grid {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }

    .features-grid {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
  }

  @media only screen and (max-width: 991px) {
    .projects-detail-section {
      padding: 60px 0;
    }

    .project-detail {
      padding: 30px;
    }

    .project-title {
      font-size: 28px;
    }

    .project-meta-grid {
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 15px;
    }

    .features-grid {
      grid-template-columns: 1fr;
    }

    .action-buttons {
      flex-direction: column;
      align-items: center;
    }

    .related-projects-carousel {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .stats-container {
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
    }
  }

  @media only screen and (max-width: 767px) {
    .sidebar-widget {
      padding: 20px;
    }

    .project-detail {
      padding: 20px;
    }

    .project-title {
      font-size: 24px;
    }

    .project-meta-grid {
      grid-template-columns: 1fr;
    }

    .specs-grid {
      grid-template-columns: 1fr;
    }

    .gallery-grid {
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
    }

    .action-text h4 {
      font-size: 20px;
    }

    .related-projects-carousel {
      grid-template-columns: 1fr;
    }

    .stats-container {
      grid-template-columns: 1fr;
    }

    .stat-item {
      padding: 15px;
    }
  }

  @media only screen and (max-width: 480px) {
    .project-actions {
      padding: 25px;
    }

    .features-box {
      padding: 20px;
    }

    .technical-specs-box {
      padding: 20px;
    }

    .feature-item {
      padding: 15px;
    }

    .spec-item {
      padding: 15px;
    }

    .project-actions .theme-btn {
      padding: 12px 20px;
      font-size: 14px;
    }
  }
</style>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    
    // Lazy Loading avec IntersectionObserver
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            
            // Ajouter classe de chargement
            img.classList.add('loading');
            
            // Créer une nouvelle image pour le préchargement
            const newImg = new Image();
            newImg.onload = function() {
              img.src = this.src;
              img.classList.remove('loading');
              img.classList.add('loaded');
              observer.unobserve(img);
            };
            
            newImg.onerror = function() {
              img.classList.remove('loading');
              img.src = '/images/placeholder.jpg'; // Image de fallback
              observer.unobserve(img);
            };
            
            // Démarrer le chargement
            newImg.src = img.dataset.src;
          }
        });
      }, {
        rootMargin: '50px 0px',
        threshold: 0.01
      });

      // Observer toutes les images lazy
      document.querySelectorAll('.lazy-image').forEach(img => {
        imageObserver.observe(img);
      });
    } else {
      // Fallback pour les navigateurs sans IntersectionObserver
      document.querySelectorAll('.lazy-image').forEach(img => {
        img.src = img.dataset.src;
        img.classList.add('loaded');
      });
    }

    // Animations au scroll avec IntersectionObserver
    const animationObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });

    // Observer tous les éléments avec la classe fade-in
    document.querySelectorAll('.fade-in').forEach(el => {
      animationObserver.observe(el);
    });

    // Navigation des projets
    const links = document.querySelectorAll('.project-link');
    const sections = document.querySelectorAll('.project-detail');

    // Fonction pour afficher un projet spécifique
    function showProject(id) {
      // Vérifier si l'ID existe
      const targetElement = document.getElementById(id);
      if (!targetElement) {
        console.warn(`Projet avec l'ID ${id} non trouvé`);
        // Afficher le premier projet par défaut si l'ID demandé n'existe pas
        if (sections.length > 0) {
          const defaultId = sections[0].id;
          showProject(defaultId);
        }
        return;
      }

      // Cacher tous les projets
      sections.forEach((section) => {
        section.classList.remove('active');
        section.style.display = 'none';
      });

      // Afficher le projet demandé avec animation
      targetElement.classList.add('active');
      targetElement.style.display = 'block';
      
      // Trigger fade-in animation
      setTimeout(() => {
        targetElement.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }, 100);

      // Mettre à jour l'état actif des liens
      links.forEach((link) => {
        link.classList.remove('active');
        const linkId = link.getAttribute('data-project-id');
        if (linkId === id) {
          link.classList.add('active');
        }
      });

      // Mise à jour de l'URL sans recharger la page
      history.pushState(null, '', `#${id}`);
    }

    // Ajouter les écouteurs d'événements aux liens
    links.forEach((link) => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const id = this.getAttribute('data-project-id');
        showProject(id);
      });
    });

    // Gérer les changements de hash dans l'URL
    window.addEventListener('hashchange', function () {
      const hash = window.location.hash.substring(1);
      if (hash) {
        showProject(hash);
      }
    });

    // Initialisation: afficher le projet correspondant au hash ou le premier projet
    const hash = window.location.hash.substring(1);
    if (hash) {
      showProject(hash);
    } else if (sections.length > 0) {
      showProject(sections[0].id);
    }

    // Gestion des galeries d'images
    const galleryBtns = document.querySelectorAll('.gallery-btn');
    const closeGalleryBtns = document.querySelectorAll('.close-gallery');

    galleryBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        const projectId = this.getAttribute('data-project-id');
        const gallery = document.getElementById(`gallery-${projectId}`);
        if (gallery) {
          gallery.style.display = 'block';
          
          // Animation d'ouverture
          gallery.style.opacity = '0';
          gallery.style.transform = 'translateY(20px)';
          
          setTimeout(() => {
            gallery.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            gallery.style.opacity = '1';
            gallery.style.transform = 'translateY(0)';
          }, 10);
        }
      });
    });

    closeGalleryBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        const projectId = this.getAttribute('data-project-id');
        const gallery = document.getElementById(`gallery-${projectId}`);
        if (gallery) {
          gallery.style.opacity = '0';
          gallery.style.transform = 'translateY(20px)';
          
          setTimeout(() => {
            gallery.style.display = 'none';
          }, 300);
        }
      });
    });

    // Animation séquentielle pour les stats
    const statNumbers = document.querySelectorAll('.stat-number');
    const animateStats = () => {
      statNumbers.forEach((stat, index) => {
        const finalValue = parseInt(stat.textContent);
        const increment = finalValue / 50;
        let current = 0;
        
        const timer = setInterval(() => {
          current += increment;
          if (current >= finalValue) {
            stat.textContent = finalValue + (stat.textContent.includes('+') ? '+' : '');
            clearInterval(timer);
          } else {
            stat.textContent = Math.floor(current) + (stat.textContent.includes('+') ? '+' : '');
          }
        }, 30 + (index * 10));
      });
    };

    // Observer pour les stats
    const statsObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setTimeout(animateStats, 300);
          statsObserver.unobserve(entry.target);
        }
      });
    });

    const statsWidget = document.querySelector('.stats-widget');
    if (statsWidget) {
      statsObserver.observe(statsWidget);
    }

    // Enhanced hover effects
    const cards = document.querySelectorAll('.project-card, .sidebar-widget, .project-detail');
    cards.forEach(card => {
      card.addEventListener('mouseenter', function() {
        this.style.transition = 'transform 0.3s ease, box-shadow 0.3s ease';
      });
    });

    // Smooth scroll pour les liens internes
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const href = this.getAttribute('href');
        if (href !== '#') {
          const target = document.querySelector(href);
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        }
      });
    });

    // Performance optimization: Debounce scroll events
    let scrollTimeout;
    window.addEventListener('scroll', function() {
      if (scrollTimeout) {
        clearTimeout(scrollTimeout);
      }
      scrollTimeout = setTimeout(() => {
        // Actions supplémentaires si nécessaire
      }, 10);
    });

    // Preload critical images
    const criticalImages = document.querySelectorAll('.main-image img[data-src]');
    criticalImages.forEach(img => {
      const newImg = new Image();
      newImg.onload = function() {
        img.src = this.src;
        img.classList.add('loaded');
      };
      newImg.src = img.dataset.src;
    });

    // Gestion du focus pour l'accessibilité
    document.addEventListener('keydown', function(e) {  
      if (e.key === 'Escape') {
        // Fermer les galeries ouvertes
        document.querySelectorAll('.image-gallery[style*="block"]').forEach(gallery => {
          gallery.style.display = 'none';
        });
      }
    });

    // Amélioration de l'accessibilité pour les boutons de galerie
    galleryBtns.forEach(btn => {
      btn.setAttribute('aria-label', 'Ouvrir la galerie d\'images');
      btn.setAttribute('role', 'button');
    });

    closeGalleryBtns.forEach(btn => {
      btn.setAttribute('aria-label', 'Fermer la galerie d\'images');
      btn.setAttribute('role', 'button');
    });

    console.log('Projects detail page initialized successfully');
  });
</script>